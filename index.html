<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover" />
  <meta name="theme-color" content="#000000" />
  <title>Hollow VPN</title>

  <base id="app-base" href="./" />
  <script src="https://telegram.org/js/telegram-web-app.js"></script>

  <style>
    :root{
      --bg-black:#000000;

      /* –¶–≤–µ—Ç–∞ –¥–ª—è –≥—Ä–∞–¥–∏–µ–Ω—Ç–∞ –∫–æ–ª—å—Ü–∞ */
      --ring-start: #00E5FF;   /* –¶–∏–∞–Ω */
      --ring-mid: #A35CFF;     /* –§–∏–æ–ª–µ—Ç–æ–≤—ã–π */
      --ring-end: #FF2093;     /* –†–æ–∑–æ–≤—ã–π */

      --accent-cyan:   #00E5FF;
      --accent-cyan-2: #29D9ED;

      --accent-pink:   #FF2093;
      --accent-pink-2: #FF47AA;

      --accent-mix: #9B48FF;

      --pill-grad: linear-gradient(
        95deg,
        var(--accent-cyan) 0%,
        var(--accent-cyan-2) 50%,
        var(--accent-pink) 100%
      );

      --text:#ffffff;
      --muted: rgba(255,255,255,.62);

      --shadow-heavy: 0 22px 58px rgba(0,0,0,.65);
      --shadow-pill:  0 18px 44px rgba(0,0,0,.55);

      --icon-black:#0b0b0f;
      --icon-green:#28d968;

      --card-max: 460px;
      --card-min: 320px;

      /* –ø—Ä–æ–≥—Ä–µ—Å—Å-–∫–æ–ª—å—Ü–æ */
      --ring-size: clamp(190px, 58vw, 230px);
      --ring-stroke: 12px;
    }

    *{box-sizing:border-box;}
    html,body{
      height:100%;
      overflow:hidden;
      scrollbar-width:none;
      -ms-overflow-style:none;
    }
    body{
      font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,sans-serif;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;

      background:
        radial-gradient(1100px 760px at 45% -10%, rgba(0, 229, 255, 0.12), transparent 55%),
        radial-gradient(900px 700px at 60% 12%, rgba(255, 32, 147, 0.09), transparent 55%),
        radial-gradient(1200px 900px at 50% 120%, rgba(255,255,255,.03), transparent 55%),
        var(--bg-black);

      color:var(--text);
      margin:0;

      padding:
        calc(12px + env(safe-area-inset-top))
        calc(12px + env(safe-area-inset-right))
        calc(22px + env(safe-area-inset-bottom))
        calc(12px + env(safe-area-inset-left));

      display:flex;
      flex-direction:column;
      align-items:center;

      min-height:100vh;
      min-height:100dvh;

      overflow:hidden;
      position:relative;
      touch-action: manipulation;
      overscroll-behavior: none;
    }

    html::-webkit-scrollbar{ width:0; height:0; }
    body::-webkit-scrollbar{ width:0; height:0; }
    .content-with-back::-webkit-scrollbar{ width:0; height:0; }
    .doc-box::-webkit-scrollbar{ width:0; height:0; }

    body::after{
      content:"";
      position:fixed;
      inset:0;
      pointer-events:none;
      background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='180' height='180'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.9' numOctaves='2' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='180' height='180' filter='url(%23n)' opacity='.18'/%3E%3C/svg%3E");
      mix-blend-mode:soft-light;
      opacity:.12;
      z-index:-1;
    }

    .card-base{
      width: min(92vw, var(--card-max));
      max-width: var(--card-max);
      min-width: min(92vw, var(--card-min));
      margin-top: 16px;
      padding: 24px;
      border-radius: 34px;

      background:
        radial-gradient(900px 420px at 50% -40%, rgba(255,255,255,.06), transparent 60%),
        linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,.02)),
        rgba(10,10,12,.82);

      border: 1px solid rgba(255,255,255,.085);
      box-shadow: var(--shadow-heavy), 0 0 0 1px rgba(0,0,0,.35) inset;

      position:relative;
      overflow:hidden;
      backdrop-filter: blur(10px);

      max-height: calc(100vh - 40px - env(safe-area-inset-top) - env(safe-area-inset-bottom));
      max-height: calc(100dvh - 40px - env(safe-area-inset-top) - env(safe-area-inset-bottom));

      display:flex;
      flex-direction:column;
    }

    @media (min-width: 820px){
      .card-base{ width: min(520px, 86vw); padding: 26px; }
    }

    .screen{display:none;}
    .screen.is-active{display:flex;}
    .fade-in{animation:fadeIn .20s ease-in-out;}
    @keyframes fadeIn{
      from{opacity:0;transform:translateY(10px);}
      to{opacity:1;transform:translateY(0);}
    }

    .logo-section{
      margin-top: 10px;
      position: relative;
      width: 170px;
      height: 170px;
      display:flex;
      justify-content:center;
      align-items:center;
      margin-left:auto;
      margin-right:auto;
      flex-shrink:0;
    }
    .glow-circle{
      position:absolute;
      width:100%;
      height:100%;
      border-radius:50%;
      background:
        linear-gradient(var(--bg-black), var(--bg-black)) padding-box,
        linear-gradient(135deg, var(--accent-cyan), var(--accent-pink)) border-box;
      border:2px solid transparent;
      box-shadow: 0 0 34px rgba(67,207,224,.14), 0 0 24px rgba(255,98,185,.10);
      z-index:1;
    }

    .logo-mask{
      position:relative;
      z-index:2;
      width: 146px;
      height: 146px;
      border-radius: 50%;
      overflow: hidden;
      display:flex;
      align-items:center;
      justify-content:center;

      background: #000;
      border: 1px solid rgba(255,255,255,.10);
      box-shadow: 0 12px 34px rgba(0,0,0,.55);
    }

    .bat-logo-img{
      width: 100%;
      height: 100%;
      display:block;
      border-radius: 50%;
      background:#000;

      object-fit: contain;
      object-position: center;

      transform: scale(1.08);
      filter: drop-shadow(0 0 14px rgba(67,207,224,.16));
      user-select:none;
      -webkit-user-drag:none;
    }

    h2{
      margin:0 0 12px;
      font-size: 28px;
      font-weight: 900;
      letter-spacing: .2px;
      color: var(--text);
      text-shadow: 0 10px 28px rgba(0,0,0,.55);
      flex-shrink:0;
    }
    p{
      margin:0;
      color:var(--muted);
      line-height:1.5;
      font-size:14px;
    }

    .user-header{
      display:flex;
      justify-content:space-between;
      align-items:flex-start;
      margin-top: 14px;
      margin-bottom: 10px;
      gap:10px;
      flex-wrap:nowrap;
      flex-shrink:0;
    }
    .greet-wrap{
      display:flex;
      flex-direction:column;
      gap:2px;
      min-width:0;
      flex:1 1 auto;
      max-width:100%;
    }
    .greet{
      font-size: 16px;
      font-weight: 900;
      color: rgba(255,255,255,.78);
      letter-spacing:.2px;
    }
    .name{
      font-size:22px;
      font-weight:900;
      color: var(--text);
      overflow:hidden;
      text-overflow:ellipsis;
      white-space:nowrap;
      display:block;
      max-width:100%;
      text-shadow: 0 10px 28px rgba(0,0,0,.55);
    }
    .date{
      color: rgba(255,255,255,.65);
      font-size: 13px;
      white-space:nowrap;
      margin-top: 2px;
      flex:0 0 auto;
      text-align:right;
    }

    .status-line{
      display:flex;
      align-items:center;
      gap:8px;
      color: rgba(255,255,255,.78);
      font-size:14px;
      font-weight:700;
      margin-bottom: 18px;
      flex-shrink:0;
    }
    .dot{
      width:7px;height:7px;border-radius:50%;
      background: linear-gradient(135deg, var(--accent-cyan), var(--accent-pink));
      box-shadow: 0 0 16px rgba(67,207,224,.22);
    }

    .btn{
      width:100%;
      border:none;
      border-radius: 22px;
      padding: 16px;
      font-size: 16px;
      font-weight: 900;
      cursor:pointer;
      display:flex;
      align-items:center;
      justify-content:center;
      gap:10px;
      transition: transform .14s ease, filter .14s ease, box-shadow .14s ease;
      -webkit-tap-highlight-color:transparent;
      min-height: 56px;
      position:relative;
      z-index:1;
      flex-shrink:0;
    }
    .btn:active{transform:scale(.985);}
    .btn-outline{
      background: rgba(255,255,255,0.03);
      color: rgba(255,255,255,.92);
      border: 1px solid rgba(255,255,255,0.10);
      box-shadow: 0 14px 34px rgba(0,0,0,.48);
    }
    .btn-lux{
      background: var(--pill-grad);
      color: #0b0b0f;
      box-shadow: var(--shadow-pill);
      overflow:hidden;
    }
    .btn-lux::after{
      content:"";
      position:absolute;
      inset:-40px -90px auto -90px;
      height:120px;
      background: radial-gradient(closest-side, rgba(255,255,255,.55), transparent 68%);
      transform: rotate(8deg);
      opacity:.22;
      pointer-events:none;
      filter: blur(8px);
    }

    .btn-buy{
      background: linear-gradient(
        90deg,
        var(--accent-cyan) 0%,
        var(--accent-cyan-2) 55%,
        var(--accent-pink) 100%
      );
      color:#0b0b0f;
      box-shadow: 0 22px 64px rgba(0,0,0,.70), 0 0 0 1px rgba(255,255,255,.14) inset;
      overflow: hidden;
      -webkit-mask-image: -webkit-radial-gradient(white, black);
      transform: translateZ(0);
    }
    .btn-buy::before{
      content:"";
      position:absolute;
      inset:0;
      background: linear-gradient(
        115deg,
        transparent 28%,
        rgba(255,255,255,0.45) 44%,
        rgba(255,255,255,0.65) 50%,
        rgba(255,255,255,0.45) 56%,
        transparent 72%
      );
      mix-blend-mode: overlay;
      transform: translateX(-110%);
      animation: buySheen 4.8s infinite;
      pointer-events:none;
      width: 220%;
      height: 100%;
      filter: blur(0.2px);
      opacity: .55;
    }
    @keyframes buySheen{
      0%   { transform: translateX(-110%) skewX(-14deg); }
      14%  { transform: translateX(110%)  skewX(-14deg); }
      100% { transform: translateX(110%)  skewX(-14deg); }
    }

    .grid{
      display:grid;
      grid-template-columns:1fr 1fr;
      gap:10px;
      width:100%;
      margin-top:10px;
      flex-shrink:0;
    }

    .back-button{
      position:absolute;
      top:18px; left:18px;
      display:inline-flex;
      align-items:center;
      gap:10px;
      background: rgba(255,255,255,0.03);
      color: var(--text);
      border: 1px solid rgba(255,255,255,0.10);
      border-radius: 24px;
      padding: 8px 14px;
      font-size: 14px;
      font-weight: 900;
      cursor:pointer;
      z-index:10;
      -webkit-tap-highlight-color:transparent;
      box-shadow: 0 12px 26px rgba(0,0,0,.45);
    }
    .back-button:active{transform:scale(.985);}
    .back-icon{
      width:18px;height:18px;
      display:inline-flex;align-items:center;justify-content:center;
      color: var(--accent-cyan);
      filter: drop-shadow(0 0 8px rgba(67,207,224,.4));
    }
    .back-icon svg{width:18px;height:18px;stroke:currentColor;stroke-width:2.4;fill:none;stroke-linecap:round;stroke-linejoin:round;}

    .content-with-back{
      padding-top:60px;
      flex:1;
      overflow-y:auto;
      -webkit-overflow-scrolling:touch;
      scrollbar-width:none;
      -ms-overflow-style:none;
      padding-bottom:10px;
      display:flex;
      flex-direction:column;
    }

    .profile-info-item{
      display:flex;
      justify-content:space-between;
      gap:10px;
      padding: 10px 0;
      border-bottom: 1px solid rgba(255,255,255,0.07);
      flex-shrink:0;
    }
    .profile-info-label{color: rgba(255,255,255,.65); font-weight: 700; font-size:14px;}
    .profile-info-value{font-weight: 900; text-align:right; overflow:hidden; text-overflow:ellipsis; color: rgba(255,255,255,.95); font-size:14px;}
    .profile-actions{ display:flex; flex-direction:column; gap: 10px; margin-top: 18px; padding-bottom: 10px; }

    .lux-row{
      display:flex; align-items:center; justify-content:flex-start; gap: 12px;
      padding: 14px; border-radius: 24px;
      background: var(--pill-grad);
      box-shadow: var(--shadow-pill);
      color: #0b0b0f;
      font-size: 16px;
      font-weight: 950;
      position:relative;
      overflow:hidden;
      transform: translateZ(0);
      min-height: 54px;
    }
    .lux-row::after{
      content:"";
      position:absolute;
      inset:-50px -90px auto -90px;
      height:140px;
      background: radial-gradient(closest-side, rgba(255,255,255,.56), transparent 70%);
      transform: rotate(10deg);
      opacity:.18;
      filter: blur(10px);
      pointer-events:none;
    }
    .lux-row:active{transform:scale(.985);}
    .icon-badge{
      width:40px;height:40px;
      border-radius: 14px;
      display:inline-flex;align-items:center;justify-content:center;
      background: rgba(255,255,255,.86);
      border: 1px solid rgba(0,0,0,.10);
      box-shadow: 0 8px 20px rgba(0,0,0,.25);
      flex:0 0 40px;
      z-index:2;
    }
    .btn-icon{ width:20px;height:20px; display:inline-flex;align-items:center;justify-content:center; color: var(--icon-black); z-index:2; }
    .btn-icon svg{ width:20px;height:20px; stroke: currentColor; stroke-width:2.4; fill:none; stroke-linecap:round; stroke-linejoin:round; }
    .icon-dollar{ color: var(--icon-green); }
    .btn-text{ flex:1 1 auto; text-align:left; z-index:2; }

    .transaction-item{ display:flex; justify-content:space-between; align-items:center; gap:12px; padding:12px 0; border-bottom:1px solid rgba(255,255,255,0.07); }
    .transaction-details{display:flex;flex-direction:column;min-width:0;}
    .transaction-title{font-weight:900;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:220px;color:rgba(255,255,255,.95);font-size:15px;}
    .transaction-date{color:rgba(255,255,255,.60);font-size:12px;}
    .transaction-amount{font-weight:950;white-space:nowrap;color:rgba(255,255,255,.92);font-size:15px;}

    .payment-link-item{
      padding:14px;
      border:1px solid rgba(255,255,255,0.08);
      border-radius:16px;
      margin-bottom:10px;
      cursor:pointer;
      transition: transform .12s ease, background-color .2s;
      -webkit-tap-highlight-color:transparent;
      background: rgba(255,255,255,.03);
      box-shadow: 0 10px 24px rgba(0,0,0,.42);
    }
    .payment-link-item:active{transform:scale(.99); background-color:rgba(255,255,255,0.06);}
    .payment-link-title{font-weight:950;color:rgba(255,255,255,.95);font-size:15px;}
    .payment-link-desc{color:rgba(255,255,255,.60);font-size:12px;margin-top:4px;}

    .setup-wrap{display:flex;flex-direction:column;gap:14px; flex:1; justify-content: center;}
    .setup-hero{display:flex;flex-direction:column;align-items:center;gap:12px;margin-top:0;}

    /* ===== –ù–û–í–û–ï –ö–û–õ–¨–¶–û –ü–†–û–ì–†–ï–°–°–ê ===== */
    .progress-ring{
      width: var(--ring-size);
      height: var(--ring-size);
      position: relative;
      display:flex;
      align-items:center;
      justify-content:center;
      flex-shrink:0;
    }

    .progress-ring svg{
      position: absolute;
      top: 0;
      left: 0;
      filter: drop-shadow(0 0 8px rgba(0, 229, 255, 0.3));
    }

    .ring-bg{
      fill: none;
      stroke: rgba(255, 255, 255, 0.08);
      stroke-width: var(--ring-stroke);
      transform-origin: center;
      transform: rotate(-90deg);
    }

    .ring-progress{
      fill: none;
      stroke: url(#ringGradient);
      stroke-width: var(--ring-stroke);
      stroke-linecap: round;
      transition: stroke-dashoffset 0.6s cubic-bezier(0.4, 0, 0.2, 1);
      transform-origin: center;
      transform: rotate(-90deg);
    }

    .ring-pulse{
      animation: ringPulse 0.6s cubic-bezier(0.4, 0, 0.2, 1);
    }

    @keyframes ringPulse{
      0%{ transform: scale(1); }
      50%{ transform: scale(1.03); }
      100%{ transform: scale(1); }
    }

    .hero-icon{
      width:92px;
      height:92px;
      border-radius: 50%;
      display:flex;
      align-items:center;
      justify-content:center;

      background:
        radial-gradient(circle, rgba(20,20,25,1) 0%, rgba(10,10,12,1) 100%);

      border: 2px solid rgba(255,255,255,0.12);
      box-shadow: 
        0 0 0 1px rgba(0,0,0,.35),
        0 18px 44px rgba(0,0,0,.75),
        inset 0 1px 0 rgba(255,255,255,0.08);

      z-index:10;
      position:relative;
      flex-shrink:0;
    }

    .hero-icon svg{
      width:44px;
      height:44px;
      stroke:#fff;
      stroke-width:2.4;
      fill:none;
      stroke-linecap:round;
      stroke-linejoin:round;
      filter: drop-shadow(0 0 12px rgba(67,207,224,.35));
      z-index:2;
      position:relative;
    }

    .setup-title{
      font-size: 24px;
      font-weight: 950;
      text-align:center;
      margin-top:2px;
      color: var(--text);
      text-shadow: 0 10px 28px rgba(0,0,0,.55);
      flex-shrink:0;
    }
    .setup-desc{
      text-align:center;
      color: rgba(255,255,255,.70);
      font-size: 14px;
      line-height: 1.5;
      padding: 0 10px;
      flex-shrink:0;
    }
    .setup-actions{
      display:flex;
      gap:10px;
      margin-top:6px;
      flex-shrink:0;
      width: 100%;
    }
    .setup-actions .btn{
      min-height: 54px;
      border-radius: 20px;
      padding: 14px;
      font-weight: 950;
    }
    .btn-ghost{
      background: rgba(255,255,255,0.03);
      border: 1px solid rgba(255,255,255,0.10);
      color: rgba(255,255,255,.92);
      box-shadow: 0 14px 34px rgba(0,0,0,.50);
    }

    .doc-box{
      color: rgba(255,255,255,.72);
      font-size: 13.5px;
      line-height: 1.65;
      overflow-y:auto;
      -webkit-overflow-scrolling:touch;
      scrollbar-width:none;
      -ms-overflow-style:none;
      padding-right: 6px;
      flex:1;
    }
    .doc-box strong{ color: rgba(255,255,255,.92); }

    .faq-list{ display:flex; flex-direction:column; gap:10px; margin-top: 10px; }
    details.faq{
      border: 1px solid rgba(255,255,255,0.10);
      background: rgba(255,255,255,0.03);
      border-radius: 18px;
      padding: 12px 14px;
      box-shadow: 0 10px 22px rgba(0,0,0,.38);
    }
    details.faq summary{
      cursor:pointer;
      list-style:none;
      font-weight: 950;
      color: rgba(255,255,255,.92);
      font-size: 14px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      -webkit-tap-highlight-color:transparent;
    }
    details.faq summary::-webkit-details-marker{ display:none; }
    .faq-body{
      margin-top: 10px;
      color: rgba(255,255,255,.70);
      font-size: 13.5px;
      line-height: 1.6;
    }
    .chev{
      color: rgba(255,255,255,.70);
      font-weight: 900;
    }

    /* ========== SUBSCRIPTION BUILDER MODAL ========== */
    .sub-modal-overlay{
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.82);
      backdrop-filter: blur(8px);
      z-index: 9999;
      display: none;
      align-items: flex-end;
      justify-content: center;
      opacity: 0;
      transition: opacity 0.3s ease;
      padding: 0;
    }

    .sub-modal-overlay.is-visible{
      display: flex;
      opacity: 1;
    }

    .sub-modal-sheet{
      background:
        radial-gradient(900px 420px at 50% -30%, rgba(0, 229, 255, 0.08), transparent 70%),
        radial-gradient(700px 500px at 50% 100%, rgba(255, 32, 147, 0.06), transparent 70%),
        linear-gradient(180deg, rgba(15,15,18,0.98), rgba(10,10,12,0.99)),
        rgba(10,10,12,0.95);

      border-radius: 32px 32px 0 0;
      width: 100%;
      max-width: 520px;
      max-height: 92vh;
      max-height: 92dvh;
      position: relative;
      box-shadow: 
        0 -12px 60px rgba(0,0,0,0.65),
        0 0 0 1px rgba(255,255,255,0.08) inset;
      
      transform: translateY(100%);
      transition: transform 0.35s cubic-bezier(0.32, 0.72, 0, 1);
      
      display: flex;
      flex-direction: column;
      overflow: hidden;
      
      padding-bottom: env(safe-area-inset-bottom);
    }

    .sub-modal-overlay.is-visible .sub-modal-sheet{
      transform: translateY(0);
    }

    .sub-modal-header{
      padding: 24px 24px 16px;
      border-bottom: 1px solid rgba(255,255,255,0.06);
      position: relative;
      flex-shrink: 0;
    }

    .sub-modal-drag-indicator{
      width: 48px;
      height: 4px;
      background: rgba(255,255,255,0.25);
      border-radius: 2px;
      margin: 0 auto 18px;
      transition: background 0.2s;
    }

    .sub-modal-close{
      position: absolute;
      top: 22px;
      right: 20px;
      width: 32px;
      height: 32px;
      border: none;
      background: rgba(255,255,255,0.06);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: all 0.2s;
      -webkit-tap-highlight-color: transparent;
      z-index: 10;
    }

    .sub-modal-close:hover{
      background: rgba(255,255,255,0.10);
      transform: scale(1.05);
    }

    .sub-modal-close:active{
      transform: scale(0.95);
    }

    .sub-modal-close svg{
      width: 18px;
      height: 18px;
      stroke: rgba(255,255,255,0.75);
      stroke-width: 2.5;
    }

    .sub-modal-title{
      font-size: 26px;
      font-weight: 950;
      color: var(--text);
      margin: 0 0 6px;
      text-shadow: 0 8px 24px rgba(0,0,0,0.55);
      letter-spacing: 0.3px;
    }

    .sub-modal-subtitle{
      font-size: 14px;
      color: rgba(255,255,255,0.62);
      margin: 0;
      font-weight: 600;
    }

    .sub-modal-content{
      flex: 1;
      overflow-y: auto;
      -webkit-overflow-scrolling: touch;
      scrollbar-width: none;
      -ms-overflow-style: none;
      padding: 20px 24px 24px;
    }

    .sub-modal-content::-webkit-scrollbar{
      display: none;
    }

    /* –ë–ª–æ–∫ —É—Å—Ç—Ä–æ–π—Å—Ç–≤ */
    .sub-devices-block{
      margin-bottom: 24px;
    }

    .sub-section-label{
      font-size: 13px;
      font-weight: 900;
      color: rgba(255,255,255,0.65);
      text-transform: uppercase;
      letter-spacing: 0.8px;
      margin-bottom: 12px;
    }

    .sub-devices-control{
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 18px 20px;
      background: 
        radial-gradient(400px 200px at 50% 0%, rgba(255,255,255,0.04), transparent),
        rgba(255,255,255,0.03);
      border: 1px solid rgba(255,255,255,0.10);
      border-radius: 20px;
      box-shadow: 0 10px 28px rgba(0,0,0,0.42);
    }

    .sub-devices-label{
      font-size: 15px;
      font-weight: 900;
      color: rgba(255,255,255,0.92);
    }

    .sub-stepper{
      display: flex;
      align-items: center;
      gap: 16px;
    }

    .sub-stepper-btn{
      width: 36px;
      height: 36px;
      border: none;
      background: linear-gradient(135deg, var(--accent-cyan), var(--accent-pink));
      border-radius: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: all 0.15s ease;
      -webkit-tap-highlight-color: transparent;
      box-shadow: 0 6px 18px rgba(0,0,0,0.35);
      position: relative;
      overflow: hidden;
    }

    .sub-stepper-btn::before{
      content: "";
      position: absolute;
      inset: -30px -50px auto -50px;
      height: 80px;
      background: radial-gradient(closest-side, rgba(255,255,255,0.45), transparent 70%);
      opacity: 0.2;
      pointer-events: none;
    }

    .sub-stepper-btn:active{
      transform: scale(0.92);
    }

    .sub-stepper-btn:disabled{
      opacity: 0.35;
      cursor: not-allowed;
      transform: none;
    }

    .sub-stepper-btn svg{
      width: 18px;
      height: 18px;
      stroke: #0b0b0f;
      stroke-width: 3;
      position: relative;
      z-index: 1;
    }

    .sub-stepper-value{
      font-size: 20px;
      font-weight: 950;
      color: var(--text);
      min-width: 28px;
      text-align: center;
      text-shadow: 0 4px 16px rgba(0,0,0,0.45);
    }

    /* –ë–ª–æ–∫ —Ç–∞—Ä–∏—Ñ–æ–≤ */
    .sub-plans-block{
      margin-bottom: 20px;
    }

    .sub-plans-grid{
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 12px;
    }

    .sub-plan-card{
      position: relative;
      padding: 18px 16px;
      background: rgba(255,255,255,0.03);
      border: 1.5px solid rgba(255,255,255,0.10);
      border-radius: 20px;
      cursor: pointer;
      transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
      -webkit-tap-highlight-color: transparent;
      box-shadow: 0 8px 24px rgba(0,0,0,0.35);
      overflow: hidden;
    }

    .sub-plan-card::before{
      content: "";
      position: absolute;
      inset: 0;
      background: linear-gradient(135deg, var(--accent-cyan), var(--accent-pink));
      opacity: 0;
      transition: opacity 0.2s;
      pointer-events: none;
    }

    .sub-plan-card:active{
      transform: scale(0.97);
    }

    .sub-plan-card.is-selected{
      border-color: var(--accent-cyan);
      box-shadow: 
        0 0 0 1px var(--accent-cyan),
        0 0 28px rgba(0, 229, 255, 0.35),
        0 12px 32px rgba(0,0,0,0.50);
    }

    .sub-plan-card.is-selected::before{
      opacity: 0.08;
    }

    .sub-plan-badge{
      position: absolute;
      top: -1px;
      right: 12px;
      background: linear-gradient(135deg, var(--accent-cyan), var(--accent-pink));
      color: #0b0b0f;
      font-size: 10px;
      font-weight: 950;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      padding: 4px 10px;
      border-radius: 0 0 10px 10px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.40);
    }

    .sub-plan-content{
      position: relative;
      z-index: 1;
    }

    .sub-plan-period{
      font-size: 18px;
      font-weight: 950;
      color: var(--text);
      margin-bottom: 8px;
      display: block;
    }

    .sub-plan-price{
      font-size: 24px;
      font-weight: 950;
      color: var(--text);
      margin-bottom: 6px;
      display: block;
      text-shadow: 0 4px 16px rgba(0,0,0,0.45);
    }

    .sub-plan-detail{
      font-size: 12px;
      color: rgba(255,255,255,0.55);
      font-weight: 700;
    }

    .sub-plan-savings{
      display: inline-block;
      margin-top: 6px;
      font-size: 11px;
      font-weight: 900;
      color: var(--accent-cyan);
      background: rgba(0, 229, 255, 0.12);
      padding: 3px 8px;
      border-radius: 8px;
      text-shadow: 0 0 8px rgba(0, 229, 255, 0.4);
    }

    /* –§—É—Ç–µ—Ä —Å –∫–Ω–æ–ø–∫–æ–π */
    .sub-modal-footer{
      padding: 16px 24px 24px;
      border-top: 1px solid rgba(255,255,255,0.06);
      flex-shrink: 0;
    }

    .sub-pay-button{
      width: 100%;
      border: none;
      border-radius: 20px;
      padding: 18px;
      font-size: 17px;
      font-weight: 950;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      transition: all 0.15s ease;
      -webkit-tap-highlight-color: transparent;
      min-height: 60px;
      position: relative;
      z-index: 1;
      
      background: linear-gradient(
        90deg,
        var(--accent-cyan) 0%,
        var(--accent-cyan-2) 55%,
        var(--accent-pink) 100%
      );
      color: #0b0b0f;
      box-shadow: 0 18px 48px rgba(0,0,0,0.65);
      overflow: hidden;
    }

    .sub-pay-button::before{
      content: "";
      position: absolute;
      inset: 0;
      background: linear-gradient(
        115deg,
        transparent 28%,
        rgba(255,255,255,0.45) 44%,
        rgba(255,255,255,0.65) 50%,
        rgba(255,255,255,0.45) 56%,
        transparent 72%
      );
      mix-blend-mode: overlay;
      transform: translateX(-110%);
      animation: paySheen 4.5s infinite;
      pointer-events: none;
      width: 220%;
      height: 100%;
      opacity: 0.5;
    }

    @keyframes paySheen{
      0%   { transform: translateX(-110%) skewX(-14deg); }
      14%  { transform: translateX(110%)  skewX(-14deg); }
      100% { transform: translateX(110%)  skewX(-14deg); }
    }

    .sub-pay-button:active{
      transform: scale(0.98);
    }

    @media (prefers-reduced-motion: reduce){
      .fade-in{ animation: none; }
      .btn-buy::before{ animation: none; opacity: .25; }
      .ring-pulse{ animation: none; }
      .ring-progress{ transition: none; }
      .sub-pay-button::before{ animation: none; opacity: 0.3; }
      .sub-modal-sheet{ transition: none; }
      .sub-modal-overlay{ transition: none; }
    }

    @media (min-width: 820px){
      .sub-modal-sheet{
        border-radius: 32px;
        max-height: 88vh;
        margin-bottom: 20px;
      }
    }
  </style>
</head>

<body>
  <!-- DASHBOARD -->
  <div id="dashboard-container" class="card-base screen is-active">
    <div class="logo-section">
      <div class="glow-circle"></div>
      <div class="logo-mask">
        <img id="logo-img" src="logo.png" alt="Hollow VPN Logo" class="bat-logo-img" />
      </div>
    </div>

    <div class="user-header">
      <div class="greet-wrap">
        <div class="greet">–ü—Ä–∏–≤–µ—Ç</div>
        <div class="name" id="user-name">–¢–µ—Å—Ç–æ–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</div>
      </div>
      <span class="date" id="user-id">ID: 000000</span>
    </div>

    <div class="status-line">
      <div class="dot"></div>
      <span id="subscription-status">–ø–æ–¥–ø–∏—Å–∫–∞ –Ω–µ –∞–∫—Ç–∏–≤–Ω–∞</span>
    </div>

    <button class="btn btn-buy" id="buy-btn" style="margin-bottom:12px;">
      <span>‚ö° –ö—É–ø–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫—É</span>
      <span style="font-size:12px;font-weight:950;margin-left:auto;">–æ—Ç 199 ‚ÇΩ</span>
    </button>

    <button class="btn btn-outline" id="setup-start-btn">‚öôÔ∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞</button>

    <div class="grid">
      <button class="btn btn-outline" id="profile-btn">üë§ –ü—Ä–æ—Ñ–∏–ª—å</button>
      <button class="btn btn-outline" id="referral-btn-main">üéÅ –†–µ—Ñ–µ—Ä–∞–ª—ã</button>
    </div>
  </div>

  <!-- SETUP -->
  <div id="setup-container" class="card-base screen">
    <button class="back-button" data-back>
      <span class="back-icon">
        <svg viewBox="0 0 24 24"><path d="M15 18l-6-6 6-6"></path></svg>
      </span>
      –ù–∞–∑–∞–¥
    </button>

    <div class="content-with-back setup-wrap">
      <div class="setup-hero">
        <div class="progress-ring" id="progress-ring">
          <svg width="100%" height="100%" viewBox="0 0 240 240">
            <defs>
              <linearGradient id="ringGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                <stop offset="0%" style="stop-color:#00FFF5;stop-opacity:1" />
                <stop offset="25%" style="stop-color:#00E5FF;stop-opacity:1" />
                <stop offset="60%" style="stop-color:#A35CFF;stop-opacity:1" />
                <stop offset="100%" style="stop-color:#FF2093;stop-opacity:1" />
              </linearGradient>
            </defs>
            <circle class="ring-bg" cx="120" cy="120" r="106" />
            <circle class="ring-progress" id="ring-circle" cx="120" cy="120" r="106" 
                    stroke-dasharray="666" stroke-dashoffset="666" />
          </svg>
          <div class="hero-icon" id="hero-icon"></div>
        </div>

        <div class="setup-title" id="setup-title">–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ</div>
        <div class="setup-desc" id="setup-desc">
          –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ v2RayTun –∏ –≤–µ—Ä–Ω–∏—Ç–µ—Å—å –∫ —ç—Ç–æ–º—É —ç–∫—Ä–∞–Ω—É. –ö–Ω–æ–ø–∫–∞ –æ—Ç–∫—Ä–æ–µ—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—É –¥–ª—è –≤–∞—à–µ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞.
        </div>
      </div>

      <div class="setup-actions">
        <button class="btn btn-lux" id="setup-primary-btn" style="flex:1;">–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å</button>
        <button class="btn btn-ghost" id="setup-next-btn" style="flex:1;">–î–∞–ª–µ–µ ‚Üí</button>
      </div>
    </div>
  </div>

  <!-- PROFILE -->
  <div id="profile-container" class="card-base screen">
    <button class="back-button" data-back>
      <span class="back-icon">
        <svg viewBox="0 0 24 24"><path d="M15 18l-6-6 6-6"></path></svg>
      </span>
      –ù–∞–∑–∞–¥
    </button>

    <div class="content-with-back">
      <h2>–ü—Ä–æ—Ñ–∏–ª—å</h2>

      <div class="profile-info-item">
        <span class="profile-info-label">–ò–º—è:</span>
        <span class="profile-info-value" id="profile-name">‚Äî</span>
      </div>
      <div class="profile-info-item">
        <span class="profile-info-label">ID:</span>
        <span class="profile-info-value" id="profile-id">‚Äî</span>
      </div>
      <div class="profile-info-item">
        <span class="profile-info-label">–°—Ç–∞—Ç—É—Å:</span>
        <span class="profile-info-value" id="profile-subscription-status">–ü—Ä–æ–≤–µ—Ä—è–µ–º...</span>
      </div>
      <div class="profile-info-item">
        <span class="profile-info-label">–î–∞—Ç–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏:</span>
        <span class="profile-info-value" id="profile-registered-at">‚Äî</span>
      </div>

      <div class="profile-actions">
        <button class="btn lux-row" id="payment-btn">
          <span class="icon-badge">
            <span class="btn-icon icon-dollar">
              <svg viewBox="0 0 24 24">
                <path d="M12 2v20"></path>
                <path d="M17 6H9.5a3.5 3.5 0 0 0 0 7H14a3.5 3.5 0 0 1 0 7H6"></path>
              </svg>
            </span>
          </span>
          <span class="btn-text">–û–ø–ª–∞—Ç–∞</span>
        </button>

        <button class="btn lux-row" id="my-transactions-btn">
          <span class="icon-badge">
            <span class="btn-icon">
              <svg viewBox="0 0 24 24">
                <path d="M7 2h10a2 2 0 0 1 2 2v18l-3-2-2 2-2-2-2 2-2-2-3 2V4a2 2 0 0 1 2-2z"></path>
                <path d="M9 7h6"></path>
                <path d="M9 11h6"></path>
                <path d="M9 15h4"></path>
              </svg>
            </span>
          </span>
          <span class="btn-text">–ú–æ–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏</span>
        </button>

        <button class="btn lux-row" id="referral-btn">
          <span class="icon-badge">
            <span class="btn-icon">
              <svg viewBox="0 0 24 24">
                <path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"></path>
                <circle cx="9" cy="7" r="3"></circle>
                <path d="M22 21v-2a4 4 0 0 0-3-3.87"></path>
                <path d="M16 3.13a3 3 0 0 1 0 5.74"></path>
                <path d="M19 8v6"></path>
                <path d="M16 11h6"></path>
              </svg>
            </span>
          </span>
          <span class="btn-text">–†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞</span>
        </button>

        <button class="btn lux-row" id="help-btn">
          <span class="icon-badge">
            <span class="btn-icon">
              <svg viewBox="0 0 24 24">
                <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
              </svg>
            </span>
          </span>
          <span class="btn-text">FAQ –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∞</span>
        </button>

        <button class="btn lux-row" id="agreement-btn">
          <span class="icon-badge">
            <span class="btn-icon">
              <svg viewBox="0 0 24 24">
                <path d="M14 2H7a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V8z"></path>
                <path d="M14 2v6h6"></path>
                <path d="M9 13h6"></path>
                <path d="M9 17h6"></path>
              </svg>
            </span>
          </span>
          <span class="btn-text">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–µ —Å–æ–≥–ª–∞—à–µ–Ω–∏–µ</span>
        </button>

        <button class="btn lux-row" id="privacy-btn">
          <span class="icon-badge">
            <span class="btn-icon">
              <svg viewBox="0 0 24 24">
                <path d="M12 2l8 4v6c0 5-3.4 9.4-8 10-4.6-.6-8-5-8-10V6l8-4z"></path>
                <path d="M9 12l2 2 4-5"></path>
              </svg>
            </span>
          </span>
          <span class="btn-text">–ü–æ–ª–∏—Ç–∏–∫–∞ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏</span>
        </button>
      </div>

      <div style="
        background: rgba(255,255,255,0.03);
        border: 1px solid rgba(255,255,255,0.10);
        border-radius: 18px;
        padding: 16px;
        margin-top: 18px;
        box-shadow: 0 14px 34px rgba(0,0,0,.48);
      ">
        <div style="font-size: 14px; color: rgba(255,255,255,.62); margin-bottom: 10px; font-weight: 700;">–°—Å—ã–ª–∫–∞ –Ω–∞ –ø–æ–¥–ø–∏—Å–∫—É –¥–ª—è —Ä—É—á–Ω–æ–≥–æ –≤–≤–æ–¥–∞:</div>
        <div id="subscription-link" style="
          font-weight: 950; 
          word-break: break-all; 
          margin-bottom: 12px; 
          color: rgba(255,255,255,.92); 
          font-size: 13px;
          font-family: 'Courier New', monospace;
          background: rgba(0,0,0,.35);
          padding: 10px;
          border-radius: 12px;
          border: 1px solid rgba(255,255,255,.08);
        ">
          https://v2ray.hollow-vpn.example/subscription/demo_user_key_12345
        </div>
        <button class="btn btn-lux" id="copy-subscription-link" style="width:100%; min-height:46px;">
          –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫—É
        </button>
      </div>
    </div>
  </div>

  <!-- HELP (FAQ + Support) -->
  <div id="help-container" class="card-base screen">
    <button class="back-button" data-back>
      <span class="back-icon">
        <svg viewBox="0 0 24 24"><path d="M15 18l-6-6 6-6"></path></svg>
      </span>
      –ù–∞–∑–∞–¥
    </button>

    <div class="content-with-back">
      <h2>FAQ</h2>
      <p style="margin-bottom:10px;">–ß–∞—Å—Ç—ã–µ –≤–æ–ø—Ä–æ—Å—ã –∏ –±—ã—Å—Ç—Ä—ã–µ –æ—Ç–≤–µ—Ç—ã.</p>

      <div class="faq-list">
        <details class="faq">
          <summary>–ù–µ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è <span class="chev">‚ñæ</span></summary>
          <div class="faq-body">
            –ü—Ä–æ–≤–µ—Ä—å—Ç–µ: 1) –ø–æ–¥–ø–∏—Å–∫–∞ –∞–∫—Ç–∏–≤–Ω–∞, 2) –∫–ª—é—á –¥–æ–±–∞–≤–ª–µ–Ω –≤ v2RayTun, 3) –≤–∫–ª—é—á—ë–Ω VPN –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏.
          </div>
        </details>

        <details class="faq">
          <summary>–ö—É–¥–∞ –≤—Å—Ç–∞–≤–∏—Ç—å –∫–ª—é—á <span class="chev">‚ñæ</span></summary>
          <div class="faq-body">
            –í v2RayTun –æ—Ç–∫—Ä–æ–π—Ç–µ "Subscriptions" ‚Üí "Add" ‚Üí –≤—Å—Ç–∞–≤—å—Ç–µ –∫–ª—é—á/—Å—Å—ã–ª–∫—É –∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç–µ.
          </div>
        </details>

        <details class="faq">
          <summary>–û–ø–ª–∞—Ç–∏–ª ‚Äî —á—Ç–æ –¥–∞–ª—å—à–µ <span class="chev">‚ñæ</span></summary>
          <div class="faq-body">
            –ü–æ—Å–ª–µ –æ–ø–ª–∞—Ç—ã –≤–µ—Ä–Ω–∏—Ç–µ—Å—å –≤ –º–∏–Ω–∏-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ ‚Üí "–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞" ‚Üí –¥–æ–±–∞–≤—å—Ç–µ –ø–æ–¥–ø–∏—Å–∫—É –≤ v2RayTun.
          </div>
        </details>
      </div>

      <div style="flex:1;"></div>

      <button class="btn btn-lux" id="open-support-chat" style="margin-top:14px;">
        –ù–∞–ø–∏—Å–∞—Ç—å –≤ –ø–æ–¥–¥–µ—Ä–∂–∫—É
      </button>
    </div>
  </div>

  <!-- PAYMENT -->
  <div id="payment-container" class="card-base screen">
    <button class="back-button" data-back>
      <span class="back-icon">
        <svg viewBox="0 0 24 24"><path d="M15 18l-6-6 6-6"></path></svg>
      </span>
      –ù–∞–∑–∞–¥
    </button>

    <div class="content-with-back">
      <h2>–û–ø–ª–∞—Ç–∞</h2>
      <p style="margin-bottom:14px;">–í—ã–±–µ—Ä–∏—Ç–µ —Å–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã.</p>
      <div id="payment-links-container" style="margin-top:14px;"></div>
    </div>
  </div>

  <!-- TRANSACTIONS -->
  <div id="transactions-container" class="card-base screen">
    <button class="back-button" data-back>
      <span class="back-icon">
        <svg viewBox="0 0 24 24"><path d="M15 18l-6-6 6-6"></path></svg>
      </span>
      –ù–∞–∑–∞–¥
    </button>

    <div class="content-with-back">
      <h2>–ú–æ–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏</h2>
      <div id="transactions-list"></div>
    </div>
  </div>

  <!-- AGREEMENT -->
  <div id="agreement-container" class="card-base screen">
    <button class="back-button" data-back>
      <span class="back-icon">
        <svg viewBox="0 0 24 24"><path d="M15 18l-6-6 6-6"></path></svg>
      </span>
      –ù–∞–∑–∞–¥
    </button>

    <div class="content-with-back">
      <h2 style="margin-bottom:16px;">–°–æ–≥–ª–∞—à–µ–Ω–∏–µ</h2>
      <div class="doc-box">
        <p><strong>–ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–¨–°–ö–û–ï –°–û–ì–õ–ê–®–ï–ù–ò–ï</strong></p>
        <p><strong>–°–µ—Ä–≤–∏—Å–∞ Hollow VPN</strong></p>
        <p>–ù–∞—Å—Ç–æ—è—â–µ–µ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–µ —Å–æ–≥–ª–∞—à–µ–Ω–∏–µ —Ä–µ–≥—É–ª–∏—Ä—É–µ—Ç —É—Å–ª–æ–≤–∏—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Å–µ—Ä–≤–∏—Å–∞ Hollow VPN (–¥–∞–ª–µ–µ ‚Äî ¬´–°–µ—Ä–≤–∏—Å¬ª).</p>
        <p>–ò—Å–ø–æ–ª—å–∑—É—è –°–µ—Ä–≤–∏—Å, –≤–∫–ª—é—á–∞—è Telegram-–±–æ—Ç–∞ –∏ —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å –Ω–∏–º —Ä–µ—Å—É—Ä—Å—ã, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç, —á—Ç–æ –æ–∑–Ω–∞–∫–æ–º–∏–ª—Å—è —Å —É—Å–ª–æ–≤–∏—è–º–∏ –Ω–∞—Å—Ç–æ—è—â–µ–≥–æ –°–æ–≥–ª–∞—à–µ–Ω–∏—è, –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏—Ö –ø–æ–Ω–∏–º–∞–µ—Ç –∏ –±–µ–∑–æ–≥–æ–≤–æ—Ä–æ—á–Ω–æ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç.</p>
        <p>Hollow VPN –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –ø—Ä–æ–≥—Ä–∞–º–º–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –∑–∞—â–∏—â—ë–Ω–Ω–æ–≥–æ —Å–µ—Ç–µ–≤–æ–≥–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è. –°–µ—Ä–≤–∏—Å –Ω–µ –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è –Ω–∞—Ä—É—à–µ–Ω–∏—è –∑–∞–∫–æ–Ω–æ–¥–∞—Ç–µ–ª—å—Å—Ç–≤–∞ –∫–∞–∫–æ–π-–ª–∏–±–æ —Å—Ç—Ä–∞–Ω—ã. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ –Ω–µ—Å—ë—Ç –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å –∑–∞ —Å–æ–±–ª—é–¥–µ–Ω–∏–µ –ø—Ä–∏–º–µ–Ω–∏–º–æ–≥–æ –∑–∞–∫–æ–Ω–æ–¥–∞—Ç–µ–ª—å—Å—Ç–≤–∞ –ø–æ –º–µ—Å—Ç—É —Å–≤–æ–µ–≥–æ –Ω–∞—Ö–æ–∂–¥–µ–Ω–∏—è.</p>
        <p>–£—Å–ª—É–≥–∏ –°–µ—Ä–≤–∏—Å–∞ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—é—Ç—Å—è –ø–æ –ø—Ä–∏–Ω—Ü–∏–ø—É ¬´–∫–∞–∫ –µ—Å—Ç—å¬ª (AS IS). –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–µ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç –ø–æ—Å—Ç–æ—è–Ω–Ω—É—é –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –°–µ—Ä–≤–∏—Å–∞, –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—É—é —Å–∫–æ—Ä–æ—Å—Ç—å —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è, —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å–æ –≤—Å–µ–º–∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏ –∏ —Å—Ç–æ—Ä–æ–Ω–Ω–∏–º–∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏, –∞ —Ç–∞–∫–∂–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ –∫–∞–∫–∏—Ö-–ª–∏–±–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –°–µ—Ä–≤–∏—Å–∞.</p>
        <p><strong>–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Hollow VPN –æ–∑–Ω–∞—á–∞–µ—Ç –ø–æ–ª–Ω–æ–µ –∏ –±–µ–∑–æ–≥–æ–≤–æ—Ä–æ—á–Ω–æ–µ –ø—Ä–∏–Ω—è–∏–µ —É—Å–ª–æ–≤–∏–π –Ω–∞—Å—Ç–æ—è—â–µ–≥–æ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ —Å–æ–≥–ª–∞—à–µ–Ω–∏—è.</strong></p>
      </div>
    </div>
  </div>

  <!-- PRIVACY -->
  <div id="privacy-container" class="card-base screen">
    <button class="back-button" data-back>
      <span class="back-icon">
        <svg viewBox="0 0 24 24"><path d="M15 18l-6-6 6-6"></path></svg>
      </span>
      –ù–∞–∑–∞–¥
    </button>

    <div class="content-with-back">
      <h2 style="margin-bottom:16px;">–ö–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å</h2>
      <div class="doc-box">
        <p><strong>–ü–û–õ–ò–¢–ò–ö–ê –ö–û–ù–§–ò–î–ï–ù–¶–ò–ê–õ–¨–ù–û–°–¢–ò</strong></p>
        <p><strong>–°–µ—Ä–≤–∏—Å–∞ Hollow VPN</strong></p>
        <p>–ù–∞—Å—Ç–æ—è—â–∞—è –ü–æ–ª–∏—Ç–∏–∫–∞ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –ø–æ—Ä—è–¥–æ–∫ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏ –∑–∞—â–∏—Ç—ã –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å–µ—Ä–≤–∏—Å–∞ Hollow VPN (–¥–∞–ª–µ–µ ‚Äî ¬´–°–µ—Ä–≤–∏—Å¬ª).</p>
        <p>–ò—Å–ø–æ–ª—å–∑—É—è –°–µ—Ä–≤–∏—Å, –≤–∫–ª—é—á–∞—è Telegram-–±–æ—Ç–∞ –∏ —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å –Ω–∏–º —Ä–µ—Å—É—Ä—Å—ã, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç —Å–≤–æ—ë –ø–æ–ª–Ω–æ–µ –∏ –±–µ–∑–æ–≥–æ–≤–æ—Ä–æ—á–Ω–æ–µ —Å–æ–≥–ª–∞—Å–∏–µ —Å —É—Å–ª–æ–≤–∏—è–º–∏ –Ω–∞—Å—Ç–æ—è—â–µ–π –ü–æ–ª–∏—Ç–∏–∫–∏. –í —Å–ª—É—á–∞–µ –Ω–µ—Å–æ–≥–ª–∞—Å–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ–±—è–∑–∞–Ω –ø—Ä–µ–∫—Ä–∞—Ç–∏—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –°–µ—Ä–≤–∏—Å–∞.</p>
        <p>Hollow VPN –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ —Ä–µ—à–µ–Ω–∏–µ –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –∑–∞—â–∏—â—ë–Ω–Ω–æ–≥–æ —Å–µ—Ç–µ–≤–æ–≥–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –∏ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–≥–æ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö.</p>
        <p>–í –ø—Ä–æ—Ü–µ—Å—Å–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –°–µ—Ä–≤–∏—Å–∞ –º–æ–∂–µ—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å—Å—è –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–∞—è —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è, –≤–∫–ª—é—á–∞—è, –Ω–æ –Ω–µ –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞—è—Å—å: —Ç–∏–ø –∏ –≤–µ—Ä—Å–∏—é –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã, —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è, –æ–±–µ–∑–ª–∏—á–µ–Ω–Ω—ã–µ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã —Å–µ—Å—Å–∏–π, –¥–∞—Ç—É –∏ –≤—Ä–µ–º—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è, –∞ —Ç–∞–∫–∂–µ —Å—Ç–∞—Ç—É—Å –∏ —Å—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è –ø–æ–¥–ø–∏—Å–∫–∏. –£–∫–∞–∑–∞–Ω–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∏—Å–∫–ª—é—á–∏—Ç–µ–ª—å–Ω–æ –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –°–µ—Ä–≤–∏—Å–∞, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–∞ –∫ —É—Å–ª—É–≥–∞–º –∏ —É–ª—É—á—à–µ–Ω–∏—è –∏—Ö –∫–∞—á–µ—Å—Ç–≤–∞.</p>
        <p>Hollow VPN –Ω–µ —Å–æ–±–∏—Ä–∞–µ—Ç, –Ω–µ —Ö—Ä–∞–Ω–∏—Ç –∏ –Ω–µ –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç —Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ —Ç—Ä–∞—Ñ–∏–∫–∞, –∏—Å—Ç–æ—Ä–∏—é –ø–æ—Å–µ—â–∞–µ–º—ã—Ö —Ä–µ—Å—É—Ä—Å–æ–≤, IP-–∞–¥—Ä–µ—Å–∞ –≤ –ø—Ä–∏–≤—è–∑–∫–µ –∫ –ª–∏—á–Ω–æ—Å—Ç–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –∞ —Ç–∞–∫–∂–µ –ª—é–±—ã–µ –¥–∞–Ω–Ω—ã–µ, –ø–æ–∑–≤–æ–ª—è—é—â–∏–µ –ø—Ä—è–º–æ –∏–ª–∏ –∫–æ—Å–≤–µ–Ω–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ª–∏—á–Ω–æ—Å—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.</p>
        <p>–û–ø–ª–∞—Ç–∞ —É—Å–ª—É–≥ –æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ —Å—Ç–æ—Ä–æ–Ω–Ω—é—é –ø–ª–∞—Ç—ë–∂–Ω—É—é —Å–∏—Å—Ç–µ–º—É Platega. Hollow VPN –Ω–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç, –Ω–µ —Ö—Ä–∞–Ω–∏—Ç –∏ –Ω–µ –∏–º–µ–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ –ø–ª–∞—Ç—ë–∂–Ω—ã–º –¥–∞–Ω–Ω—ã–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –≤–∫–ª—é—á–∞—è —Ä–µ–∫–≤–∏–∑–∏—Ç—ã –±–∞–Ω–∫–æ–≤—Å–∫–∏—Ö –∫–∞—Ä—Ç, —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω—ã—Ö –∫–æ—à–µ–ª—å–∫–æ–≤ –∏–ª–∏ –∏–Ω—ã—Ö –ø–ª–∞—Ç—ë–∂–Ω—ã—Ö —Å—Ä–µ–¥—Å—Ç–≤. –í—Å–µ –ø–ª–∞—Ç—ë–∂–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Ä–µ–≥—É–ª–∏—Ä—É—é—Ç—Å—è –ø—Ä–∞–≤–∏–ª–∞–º–∏ –∏ –ø–æ–ª–∏—Ç–∏–∫–∞–º–∏ –ø–ª–∞—Ç—ë–∂–Ω–æ–≥–æ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞.</p>
        <p>–û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –º–æ–∂–µ—Ç –±—ã—Ç—å –ø–µ—Ä–µ–¥–∞–Ω–∞ —Ç—Ä–µ—Ç—å–∏–º –ª–∏—Ü–∞–º –∏—Å–∫–ª—é—á–∏—Ç–µ–ª—å–Ω–æ –≤ —Å–ª—É—á–∞—è—Ö, –ø—Ä–µ–¥—É—Å–º–æ—Ç—Ä–µ–Ω–Ω—ã—Ö –¥–µ–π—Å—Ç–≤—É—é—â–∏–º –∑–∞–∫–æ–Ω–æ–¥–∞—Ç–µ–ª—å—Å—Ç–≤–æ–º, –ª–∏–±–æ –ø—Ä–∏ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–π –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –°–µ—Ä–≤–∏—Å–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Ö–æ—Å—Ç–∏–Ω–≥ –∏–ª–∏ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã–µ —É—Å–ª—É–≥–∏).</p>
        <p>Hollow VPN –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Ä–∞–∑—É–º–Ω—ã–µ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –∏ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–æ–Ω–Ω—ã–µ –º–µ—Ä—ã –¥–ª—è –∑–∞—â–∏—Ç—ã –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏, –æ–¥–Ω–∞–∫–æ –Ω–µ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç –∞–±—Å–æ–ª—é—Ç–Ω—É—é –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö –∏ –±–µ—Å–ø–µ—Ä–µ–±–æ–π–Ω—É—é —Ä–∞–±–æ—Ç—É –°–µ—Ä–≤–∏—Å–∞. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Å–æ–∑–Ω–∞—ë—Ç –∏ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –≤–æ–∑–º–æ–∂–Ω—ã–µ —Ä–∏—Å–∫–∏, —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —Å–µ—Ç–µ–≤—ã—Ö —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π.</p>
        <p>–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ü–∏—è –°–µ—Ä–≤–∏—Å–∞ –≤–ø—Ä–∞–≤–µ –≤ –ª—é–±–æ–µ –≤—Ä–µ–º—è –≤–Ω–æ—Å–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –Ω–∞—Å—Ç–æ—è—â—É—é –ü–æ–ª–∏—Ç–∏–∫—É –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏ –±–µ–∑ –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ–≥–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π. –ê–∫—Ç—É–∞–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è –ü–æ–ª–∏—Ç–∏–∫–∏ –≤—Å–µ–≥–¥–∞ –¥–æ—Å—Ç—É–ø–Ω–∞ —á–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –°–µ—Ä–≤–∏—Å–∞.</p>
        <p><strong>–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Hollow VPN –æ–∑–Ω–∞—á–∞–µ—Ç –ø–æ–ª–Ω–æ–µ –ø—Ä–∏–Ω—è—Ç–∏–µ —É—Å–ª–æ–≤–∏–π –Ω–∞—Å—Ç–æ—è—â–µ–π –ü–æ–ª–∏—Ç–∏–∫–∏ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏.</strong></p>
      </div>
    </div>
  </div>

  <!-- REFERRAL -->
  <div id="referral-container" class="card-base screen">
    <button class="back-button" data-back>
      <span class="back-icon">
        <svg viewBox="0 0 24 24"><path d="M15 18l-6-6 6-6"></path></svg>
      </span>
      –ù–∞–∑–∞–¥
    </button>

    <div class="content-with-back">
      <h2>–†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞</h2>
      <p>–ü—Ä–∏–≥–ª–∞—à–∞–π—Ç–µ –¥—Ä—É–∑–µ–π –∏ –ø–æ–ª—É—á–∞–π—Ç–µ –±–æ–Ω—É—Å—ã!</p>

      <div style="
        background: rgba(255,255,255,0.03);
        border: 1px solid rgba(255,255,255,0.10);
        border-radius: 18px;
        padding: 16px;
        margin: 18px 0;
        text-align: center;
        box-shadow: 0 14px 34px rgba(0,0,0,.48);
      ">
        <div style="font-size: 14px; color: rgba(255,255,255,.62); margin-bottom: 10px;">–í–∞—à–∞ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å—Å—ã–ª–∫–∞:</div>
        <div id="referral-link" style="font-weight: 950; word-break: break-all; margin-bottom: 12px; color: rgba(255,255,255,.92); font-size: 14px;">
          https://t.me/HollowVPN_bot?start=ref_000000
        </div>
        <button class="btn btn-lux" id="copy-referral-link" style="width:auto; padding:10px 18px; margin:0 auto; min-height:46px;">
          –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å
        </button>
      </div>
    </div>
  </div>

  <!-- ========== SUBSCRIPTION BUILDER MODAL ========== -->
  <div id="sub-modal-overlay" class="sub-modal-overlay">
    <div id="sub-modal-sheet" class="sub-modal-sheet">
      <!-- Header -->
      <div class="sub-modal-header">
        <div class="sub-modal-drag-indicator"></div>
        <button class="sub-modal-close" id="sub-modal-close">
          <svg viewBox="0 0 24 24" fill="none" stroke-linecap="round" stroke-linejoin="round">
            <path d="M18 6L6 18M6 6l12 12"/>
          </svg>
        </button>
        <div class="sub-modal-title">–í—ã–±–æ—Ä —Ç–∞—Ä–∏—Ñ–∞</div>
        <div class="sub-modal-subtitle">–í—ã–±–µ—Ä–∏—Ç–µ –ø–µ—Ä–∏–æ–¥ –∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤</div>
      </div>

      <!-- Content -->
      <div class="sub-modal-content">
        <!-- Devices Block -->
        <div class="sub-devices-block">
          <div class="sub-section-label">–£—Å—Ç—Ä–æ–π—Å—Ç–≤–∞</div>
          <div class="sub-devices-control">
            <div class="sub-devices-label">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤</div>
            <div class="sub-stepper">
              <button class="sub-stepper-btn" id="sub-devices-minus">
                <svg viewBox="0 0 24 24" fill="none" stroke-linecap="round" stroke-linejoin="round">
                  <path d="M5 12h14"/>
                </svg>
              </button>
              <div class="sub-stepper-value" id="sub-devices-count">1</div>
              <button class="sub-stepper-btn" id="sub-devices-plus">
                <svg viewBox="0 0 24 24" fill="none" stroke-linecap="round" stroke-linejoin="round">
                  <path d="M12 5v14M5 12h14"/>
                </svg>
              </button>
            </div>
          </div>
        </div>

        <!-- Plans Block -->
        <div class="sub-plans-block">
          <div class="sub-section-label">–ü–µ—Ä–∏–æ–¥ –ø–æ–¥–ø–∏—Å–∫–∏</div>
          <div class="sub-plans-grid">
            <!-- 1 Month -->
            <div class="sub-plan-card" data-plan="1m">
              <div class="sub-plan-content">
                <span class="sub-plan-period">1 –º–µ—Å—è—Ü</span>
                <span class="sub-plan-price">199 ‚ÇΩ</span>
                <span class="sub-plan-detail">199 ‚ÇΩ/–º–µ—Å</span>
              </div>
            </div>

            <!-- 3 Months -->
            <div class="sub-plan-card" data-plan="3m">
              <div class="sub-plan-content">
                <span class="sub-plan-period">3 –º–µ—Å—è—Ü–∞</span>
                <span class="sub-plan-price">399 ‚ÇΩ</span>
                <span class="sub-plan-detail">133 ‚ÇΩ/–º–µ—Å</span>
                <span class="sub-plan-savings">‚àí33%</span>
              </div>
            </div>

            <!-- 6 Months -->
            <div class="sub-plan-card is-selected" data-plan="6m">
              <div class="sub-plan-badge">–ü–æ–ø—É–ª—è—Ä–Ω–æ</div>
              <div class="sub-plan-content">
                <span class="sub-plan-period">6 –º–µ—Å—è—Ü–µ–≤</span>
                <span class="sub-plan-price">699 ‚ÇΩ</span>
                <span class="sub-plan-detail">117 ‚ÇΩ/–º–µ—Å</span>
                <span class="sub-plan-savings">‚àí41%</span>
              </div>
            </div>

            <!-- 1 Year -->
            <div class="sub-plan-card" data-plan="1y">
              <div class="sub-plan-content">
                <span class="sub-plan-period">1 –≥–æ–¥</span>
                <span class="sub-plan-price">1299 ‚ÇΩ</span>
                <span class="sub-plan-detail">108 ‚ÇΩ/–º–µ—Å</span>
                <span class="sub-plan-savings">‚àí46%</span>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Footer -->
      <div class="sub-modal-footer">
        <button class="sub-pay-button" id="sub-pay-button">
          –û–ø–ª–∞—Ç–∏—Ç—å <span id="sub-total-price">699 ‚ÇΩ</span>
        </button>
      </div>
    </div>
  </div>

  <script>
    const SUPPORT_URL = "https://t.me/HollowVPN_support";
    const CONFIG_IMPORT_URL = "https://example.com/import-config";
    const SUBSCRIPTION_KEY = "hollow://subscription/demo_key_replace_me";

    const PAYMENT_LINKS = [
      { url: "https://example.com/pay/card", title: "–ë–∞–Ω–∫–æ–≤—Å–∫–∞—è –∫–∞—Ä—Ç–∞ (–†–§)", desc: "Visa, Mastercard, –ú–ò–†" },
      { url: "https://example.com/pay/sbp",  title: "–°–ë–ü",                  desc: "–°–∏—Å—Ç–µ–º–∞ –±—ã—Å—Ç—Ä—ã—Ö –ø–ª–∞—Ç–µ–∂–µ–π" }
    ];

    const URLS = {
      ios_appstore: "https://apps.apple.com/app/id6476628951",
      android_play: "https://play.google.com/store/apps/details?id=com.v2raytun.android",
      desktop_site: "https://v2raytun.com/",
      default:      "https://v2raytun.com/",
      deeplink:     "v2raytun://"
    };

    const tg = window.Telegram?.WebApp;

    const safe = (fn) => { try{ fn(); } catch(_){ } };
    const haptic = (type="light") => safe(()=> tg?.HapticFeedback?.impactOccurred(type));
    const popup = (title, message) => safe(()=> tg?.showPopup({ title, message, buttons:[{ type:"ok" }] }));

    const openLink = (url) => {
      if(!url) return;
      safe(()=> tg?.openLink ? tg.openLink(url) : window.open(url, "_blank", "noopener,noreferrer"));
    };

    const openTelegramLink = (url) => {
      if(!url) return;
      safe(()=> tg?.openTelegramLink ? tg.openTelegramLink(url) : window.open(url, "_blank", "noopener,noreferrer"));
    };

    const openV2RayTunWithFallback = () => {
      const deepLink = URLS.deeplink;
      const fallback = URLS.default;

      let didHide = false;
      let timerId;

      const cleanup = () => {
        if(timerId) clearTimeout(timerId);
        document.removeEventListener("visibilitychange", onVisibility);
        window.removeEventListener("pagehide", onPageHide);
      };

      const onVisibility = () => {
        if(document.hidden){
          didHide = true;
          cleanup();
        }
      };

      const onPageHide = () => {
        didHide = true;
        cleanup();
      };

      document.addEventListener("visibilitychange", onVisibility);
      window.addEventListener("pagehide", onPageHide);

      if(deepLink) openLink(deepLink);

      timerId = setTimeout(() => {
        if(!didHide) openLink(fallback);
        cleanup();
      }, 1200);
    };

    function applyDynamicBase(){
      const baseEl = document.getElementById("app-base");
      if(!baseEl) return;
      const baseUrl = new URL(".", window.location.href).toString();
      baseEl.setAttribute("href", baseUrl);

      const logo = document.getElementById("logo-img");
      if(logo){
        logo.src = new URL("logo.png", baseUrl).toString();
      }
    }

    function isIOS(){
      const ua = navigator.userAgent || "";
      return /iPad|iPhone|iPod/.test(ua) || (ua.includes("Macintosh") && navigator.maxTouchPoints > 1);
    }
    function isAndroid(){ return /Android/i.test(navigator.userAgent || ""); }
    function isWindows(){ return /Windows NT/i.test(navigator.userAgent || ""); }
    function isMacOS(){ return /Macintosh|Mac OS X/i.test(navigator.userAgent || "") && !isIOS(); }
    function isLinux(){ return /Linux/i.test(navigator.userAgent || "") && !isAndroid(); }

    function getDownloadLink(){
      if (isIOS() || isMacOS()) return URLS.ios_appstore;
      if (isAndroid()) return URLS.android_play;
      if (isWindows() || isLinux()) return URLS.desktop_site;
      return URLS.default;
    }

    function escapeHtml(str){
      return String(str ?? "")
        .replace(/&/g,"&amp;")
        .replace(/</g,"&lt;")
        .replace(/>/g,"&gt;")
        .replace(/"/g,"&quot;")
        .replace(/'/g,"&#039;");
    }

    const $ = (id) => document.getElementById(id);

    const screens = {
      dashboard: $("dashboard-container"),
      setup: $("setup-container"),
      profile: $("profile-container"),
      payment: $("payment-container"),
      transactions: $("transactions-container"),
      agreement: $("agreement-container"),
      privacy: $("privacy-container"),
      referral: $("referral-container"),
      help: $("help-container"),
    };

    const historyStack = ["dashboard"];

    function setActiveScreen(key, push=true){
      for(const el of Object.values(screens)) el.classList.remove("is-active","fade-in");
      const el = screens[key];
      if(!el) return;

      el.classList.add("is-active");
      void el.offsetWidth;
      el.classList.add("fade-in");

      if(push) historyStack.push(key);

      const content = el.querySelector(".content-with-back");
      if(content) content.scrollTop = 0;
    }

    function goBack(){
      if(historyStack.length<=1) return;
      historyStack.pop();
      setActiveScreen(historyStack[historyStack.length-1], false);
      haptic("light");
    }

    document.querySelectorAll("[data-back]").forEach(btn => btn.addEventListener("click", goBack));

    let subscriptionStatus = "no_subscription";
    let transactions = [];

    function updateSubscriptionStatusUI(extra = {}){
      const statusText = $("subscription-status");
      const profileStatusText = $("profile-subscription-status");

      let status = "–ø–æ–¥–ø–∏—Å–∫–∞ –Ω–µ –∞–∫—Ç–∏–≤–Ω–∞";
      let profileStatus = "–ù–µ –æ–ø–ª–∞—á–µ–Ω–æ";

      if(subscriptionStatus === "premium"){
        status = extra.traffic ? `premium ‚Ä¢ ${extra.traffic} –ì–±` : "premium";
        profileStatus = "Premium";
      }else if(subscriptionStatus === "unlimited"){
        status = "unlimited ‚Ä¢ ‚àû –ì–±";
        profileStatus = "Unlimited";
      }

      statusText.textContent = status;
      profileStatusText.textContent = profileStatus;
    }

    async function fetchSubscription(){
      updateSubscriptionStatusUI();
      setTimeout(() => {
        subscriptionStatus = "no_subscription";
        updateSubscriptionStatusUI({ traffic: 50 });
      }, 350);
    }

    function displayTransactions(){
      const container = $("transactions-list");
      container.innerHTML = "";

      if(!transactions.length){
        container.innerHTML = '<p style="margin-top:8px; text-align:center;">–ü–æ–∫–∞ –Ω–µ—Ç —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π.</p>';
        return;
      }

      const frag = document.createDocumentFragment();
      transactions.forEach(tx=>{
        const item = document.createElement("div");
        item.className = "transaction-item";
        item.innerHTML = `
          <div class="transaction-details">
            <span class="transaction-title">${escapeHtml(tx.title)}</span>
            <span class="transaction-date">${escapeHtml(tx.date)}</span>
          </div>
          <span class="transaction-amount">${escapeHtml(tx.amount)}</span>
        `;
        frag.appendChild(item);
      });
      container.appendChild(frag);
    }

    function displayPaymentLinks(){
      const container = $("payment-links-container");
      container.innerHTML = "";

      const frag = document.createDocumentFragment();
      PAYMENT_LINKS.forEach(link=>{
        const item = document.createElement("div");
        item.className = "payment-link-item";
        item.dataset.url = link.url;
        item.innerHTML = `
          <div class="payment-link-title">${escapeHtml(link.title)}</div>
          <div class="payment-link-desc">${escapeHtml(link.desc)}</div>
        `;
        frag.appendChild(item);
      });
      container.appendChild(frag);
    }

    async function copyTextSmart(text){
      if(!text) return false;
      try{
        if(navigator.clipboard?.writeText){
          await navigator.clipboard.writeText(text);
          return true;
        }
      }catch(_){}
      try{
        const ta = document.createElement("textarea");
        ta.value = text;
        ta.setAttribute("readonly", "");
        ta.style.position = "fixed";
        ta.style.left = "-9999px";
        ta.style.top = "-9999px";
        document.body.appendChild(ta);
        ta.select();
        ta.setSelectionRange(0, ta.value.length);
        const ok = document.execCommand("copy");
        document.body.removeChild(ta);
        return !!ok;
      }catch(_){}
      return false;
    }

    const setupSteps = [
      {
        key: "app", progress: 35,
        title: "–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ",
        desc: "–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ v2RayTun –∏ –≤–µ—Ä–Ω–∏—Ç–µ—Å—å –∫ —ç—Ç–æ–º—É —ç–∫—Ä–∞–Ω—É. –ö–Ω–æ–ø–∫–∞ –æ—Ç–∫—Ä–æ–µ—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—É –¥–ª—è –≤–∞—à–µ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞.",
        primaryText: "–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å", nextText: "–î–∞–ª–µ–µ ‚Üí", primaryAction: "download",
        icon: `<svg viewBox="0 0 24 24"><path d="M12 3v10"></path><path d="M8 11l4 4 4-4"></path><path d="M4 17a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2"></path></svg>`
      },
      {
        key: "sub", progress: 70,
        title: "–ü–æ–¥–ø–∏—Å–∫–∞",
        desc: "–ù–∞–∂–º–∏—Ç–µ ¬´–î–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫—É¬ª ‚Äî –æ—Ç–∫—Ä–æ–µ–º v2RayTun. (–ö–ª—é—á –∫–æ–ø–∏—Ä—É–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –≤—Ö–æ–¥–µ –Ω–∞ —ç—Ç–æ—Ç —à–∞–≥.)",
        primaryText: "–î–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫—É", nextText: "–î–∞–ª–µ–µ ‚Üí", primaryAction: "import",
        icon: `<svg viewBox="0 0 24 24"><path d="M12 3c4.5 0 8 3.6 8 8.1 0 4.6-3.5 9.2-8 9.2S4 15.7 4 11.1C4 6.6 7.5 3 12 3z"></path><path d="M12 7v8"></path><path d="M8 11h8"></path></svg>`
      },
      {
        key: "done", progress: 100,
        title: "–ì–æ—Ç–æ–≤–æ!",
        desc: "–û—Ç–∫—Ä–æ–π—Ç–µ v2RayTun –∏ –≤–∫–ª—é—á–∏—Ç–µ VPN.",
        primaryText: "–ó–∞–≤–µ—Ä—à–∏—Ç—å", nextText: "–í –Ω–∞—á–∞–ª–æ", primaryAction: "finish",
        icon: `<svg viewBox="0 0 24 24"><path d="M20 6L9 17l-5-5"></path></svg>`
      }
    ];

    let setupIndex = 0;
    let lastSetupKey = null;

    function setRingProgress(percentage) {
      const circle = $("ring-circle");
      if (!circle) return;
      
      const circumference = 666;
      const offset = circumference - (percentage / 100) * circumference;
      
      circle.style.strokeDashoffset = offset;
    }

    function pulseRing(){
      const ring = $("progress-ring");
      if (!ring) return;
      ring.classList.remove("ring-pulse");
      void ring.offsetWidth;
      ring.classList.add("ring-pulse");
    }

    async function renderSetup(withAnim=true){
      const s = setupSteps[setupIndex];
      $("hero-icon").innerHTML = s.icon;
      $("setup-title").textContent = s.title;
      $("setup-desc").textContent = s.desc;
      $("setup-primary-btn").textContent = s.primaryText;
      $("setup-next-btn").textContent = s.nextText;

      if(s.key === "sub" && lastSetupKey !== "sub"){
        const txt = SUBSCRIPTION_KEY;
        if(txt){
          const ok = await copyTextSmart(txt);
          if(ok) popup("–°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ", "–ö–ª—é—á —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω");
          else popup("–û—à–∏–±–∫–∞", "–ù–µ —É–¥–∞–ª–æ—Å—å —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.");
        }
      }

      if(withAnim) pulseRing();
      setRingProgress(s.progress);
      lastSetupKey = s.key;
    }

    $("profile-btn").addEventListener("click", async ()=>{
      haptic("medium");
      setActiveScreen("profile");
      await fetchSubscription();
    });

    $("referral-btn-main").addEventListener("click", ()=>{
      haptic("medium");
      setActiveScreen("referral");
    });

    $("setup-start-btn").addEventListener("click", ()=>{
      haptic("medium");
      setupIndex = 0;
      renderSetup(false);
      setActiveScreen("setup");
      setTimeout(()=>renderSetup(true), 80);
    });

    $("buy-btn").addEventListener("click", ()=>{
      haptic("medium");
      openSubscriptionBuilder();
    });

    $("setup-primary-btn").addEventListener("click", ()=>{
      const s = setupSteps[setupIndex];
      haptic("light");
      pulseRing();

      if(s.primaryAction === "download"){
        openLink(getDownloadLink());
        return;
      }
      if(s.primaryAction === "import"){
        if(CONFIG_IMPORT_URL && CONFIG_IMPORT_URL !== "https://example.com/import-config"){
          openLink(CONFIG_IMPORT_URL);
        }else{
          openV2RayTunWithFallback();
        }
        return;
      }
      if(s.primaryAction === "finish"){
        setActiveScreen("dashboard");
        return;
      }
    });

    $("setup-next-btn").addEventListener("click", ()=>{
      haptic("light");
      setupIndex = (setupIndex < setupSteps.length - 1) ? setupIndex + 1 : 0;
      renderSetup(true);
    });

    $("payment-btn").addEventListener("click", ()=>{
      haptic("medium");
      displayPaymentLinks();
      setActiveScreen("payment");
    });

    $("my-transactions-btn").addEventListener("click", ()=>{
      haptic("medium");
      displayTransactions();
      setActiveScreen("transactions");
    });

    $("referral-btn").addEventListener("click", ()=>{
      haptic("medium");
      setActiveScreen("referral");
    });

    $("help-btn").addEventListener("click", ()=>{
      haptic("medium");
      setActiveScreen("help");
    });

    $("agreement-btn").addEventListener("click", ()=>{
      haptic("medium");
      setActiveScreen("agreement");
    });

    $("privacy-btn").addEventListener("click", ()=>{
      haptic("medium");
      setActiveScreen("privacy");
    });

    $("open-support-chat").addEventListener("click", ()=>{
      haptic("light");
      openTelegramLink(SUPPORT_URL);
    });

    $("payment-links-container").addEventListener("click", (e)=>{
      const target = e.target.closest(".payment-link-item");
      if(!target) return;
      haptic("light");
      openLink(target.dataset.url);
    });

    $("copy-referral-link").addEventListener("click", async ()=>{
      haptic("light");
      const txt = $("referral-link")?.innerText || "";
      const ok = await copyTextSmart(txt);
      if(ok) popup("–°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ", "–°—Å—ã–ª–∫–∞ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∞ –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞.");
      else popup("–û—à–∏–±–∫–∞", "–ù–µ —É–¥–∞–ª–æ—Å—å —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.");
    });

    $("copy-subscription-link").addEventListener("click", async ()=>{
      haptic("light");
      const txt = $("subscription-link")?.innerText || "";
      const ok = await copyTextSmart(txt);
      if(ok) popup("–°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ", "–°—Å—ã–ª–∫–∞ –Ω–∞ –ø–æ–¥–ø–∏—Å–∫—É —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∞ –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞.");
      else popup("–û—à–∏–±–∫–∞", "–ù–µ —É–¥–∞–ª–æ—Å—å —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.");
    });

    function pickNiceName(user){
      const first = (user?.first_name || "").trim();
      const last  = (user?.last_name || "").trim();
      return (first || last || "–î—Ä—É–≥");
    }

    // ========== SUBSCRIPTION BUILDER LOGIC ==========
    
    const PLAN_PRICES = {
      "1m": 199,
      "3m": 399,
      "6m": 699,
      "1y": 1299
    };

    const DEVICE_EXTRA_PRICE = 100; // –¶–µ–Ω–∞ –∑–∞ –∫–∞–∂–¥–æ–µ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ

    let subDevicesCount = 1;
    let subSelectedPlan = "6m";

    function updateSubTotal(){
      const basePrice = PLAN_PRICES[subSelectedPlan] || 0;
      const extraDevices = Math.max(0, subDevicesCount - 1);
      const total = basePrice + (extraDevices * DEVICE_EXTRA_PRICE);
      $("sub-total-price").textContent = `${total} ‚ÇΩ`;
    }

    function openSubscriptionBuilder(){
      const overlay = $("sub-modal-overlay");
      const sheet = $("sub-modal-sheet");
      
      overlay.classList.add("is-visible");
      
      // Reset scroll
      const content = sheet.querySelector(".sub-modal-content");
      if(content) content.scrollTop = 0;
      
      updateSubTotal();
      
      // Prevent body scroll
      document.body.style.overflow = "hidden";
    }

    function closeSubscriptionBuilder(){
      const overlay = $("sub-modal-overlay");
      overlay.classList.remove("is-visible");
      
      // Restore body scroll
      document.body.style.overflow = "";
      
      haptic("light");
    }

    // Close button
    $("sub-modal-close").addEventListener("click", closeSubscriptionBuilder);

    // Click outside
    $("sub-modal-overlay").addEventListener("click", (e) => {
      if(e.target.id === "sub-modal-overlay"){
        closeSubscriptionBuilder();
      }
    });

    // Swipe down to close
    let touchStartY = 0;
    let touchCurrentY = 0;
    let isDragging = false;

    const sheet = $("sub-modal-sheet");
    const dragIndicator = sheet.querySelector(".sub-modal-drag-indicator");

    dragIndicator.addEventListener("touchstart", (e) => {
      touchStartY = e.touches[0].clientY;
      isDragging = true;
      sheet.style.transition = "none";
    });

    dragIndicator.addEventListener("touchmove", (e) => {
      if(!isDragging) return;
      touchCurrentY = e.touches[0].clientY;
      const diff = touchCurrentY - touchStartY;
      
      if(diff > 0){
        sheet.style.transform = `translateY(${diff}px)`;
      }
    });

    dragIndicator.addEventListener("touchend", () => {
      if(!isDragging) return;
      isDragging = false;
      
      const diff = touchCurrentY - touchStartY;
      sheet.style.transition = "";
      
      if(diff > 100){
        closeSubscriptionBuilder();
      } else {
        sheet.style.transform = "translateY(0)";
      }
    });

    // Devices stepper
    $("sub-devices-minus").addEventListener("click", () => {
      if(subDevicesCount > 1){
        subDevicesCount--;
        $("sub-devices-count").textContent = subDevicesCount;
        updateSubTotal();
        updateStepperButtons();
        haptic("light");
      }
    });

    $("sub-devices-plus").addEventListener("click", () => {
      if(subDevicesCount < 5){
        subDevicesCount++;
        $("sub-devices-count").textContent = subDevicesCount;
        updateSubTotal();
        updateStepperButtons();
        haptic("light");
      }
    });

    // Update stepper buttons state
    function updateStepperButtons(){
      $("sub-devices-minus").disabled = subDevicesCount <= 1;
      $("sub-devices-plus").disabled = subDevicesCount >= 5;
    }

    // Plan selection
    document.querySelectorAll(".sub-plan-card").forEach(card => {
      card.addEventListener("click", () => {
        document.querySelectorAll(".sub-plan-card").forEach(c => c.classList.remove("is-selected"));
        card.classList.add("is-selected");
        
        subSelectedPlan = card.dataset.plan;
        updateSubTotal();
        haptic("medium");
      });
    });

    // Pay button
    $("sub-pay-button").addEventListener("click", async () => {
      haptic("medium");
      
      const user = tg?.initDataUnsafe?.user;
      if (!user) {
        popup("–û—à–∏–±–∫–∞", "–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è");
        return;
      }

      try {
        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏
        const payBtn = $("sub-pay-button");
        const originalText = payBtn.innerHTML;
        payBtn.innerHTML = "‚è≥ –°–æ–∑–¥–∞–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–∞...";
        payBtn.disabled = true;

        const response = await fetch(`${window.location.origin}/api/payments/create`, {
          method: "POST",
          headers: {
            "Content-Type": "application/json"
          },
          body: JSON.stringify({
            telegram_id: user.id,
            plan: subSelectedPlan,
            devices: subDevicesCount,
            username: user.username,
            first_name: user.first_name
          })
        });

        if (!response.ok) {
          throw new Error(`HTTP ${response.status}`);
        }

        const data = await response.json();

        if (data.payment_url) {
          closeSubscriptionBuilder();
          // –û—Ç–∫—Ä—ã–≤–∞–µ–º –ø–ª–∞—Ç—ë–∂–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É Platega
          openLink(data.payment_url);
        } else {
          throw new Error("No payment_url in response");
        }

      } catch (error) {
        console.error("‚ùå Payment creation error:", error);
        popup("–û—à–∏–±–∫–∞", "–ù–µ —É–¥–∞–ª–æ—Å—å —Å–æ–∑–¥–∞—Ç—å –ø–ª–∞—Ç–µ–∂. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ.");
        
        // –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∫–Ω–æ–ø–∫—É
        const payBtn = $("sub-pay-button");
        payBtn.innerHTML = `–û–ø–ª–∞—Ç–∏—Ç—å <span id="sub-total-price">${calculate_amount(subSelectedPlan, subDevicesCount)} ‚ÇΩ</span>`;
        payBtn.disabled = false;
      }
    });

    // Initial stepper state
    updateStepperButtons();

    // Update subscription status
    async function updateSubscriptionStatus() {
      const user = tg?.initDataUnsafe?.user;
      if (!user) return;

      try {
        const response = await fetch(`${window.location.origin}/api/subscription/status?telegram_id=${user.id}`);
        if (!response.ok) return;

        const data = await response.json();

        const statusText = $("subscription-status");
        const profileStatusText = $("profile-subscription-status");

        if (data.status === "active") {
          const daysLeft = data.days_left || 0;
          const planNames = {
            "1m": "1 –º–µ—Å—è—Ü",
            "3m": "3 –º–µ—Å—è—Ü–∞", 
            "6m": "6 –º–µ—Å—è—Ü–µ–≤",
            "1y": "1 –≥–æ–¥"
          };
          const planText = planNames[data.plan] || data.plan;
          const deviceText = data.devices === 1 ? "1 —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ" : `${data.devices} —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞`;
          
          if (statusText) {
            statusText.textContent = `–∞–∫—Ç–∏–≤–Ω–∞ ‚Ä¢ ${planText} ‚Ä¢ ${daysLeft} –¥–Ω–µ–π`;
          }
          if (profileStatusText) {
            profileStatusText.textContent = `–ê–∫—Ç–∏–≤–Ω–∞ (${daysLeft} –¥–Ω–µ–π, ${deviceText})`;
          }
        } else {
          if (statusText) {
            statusText.textContent = "–ø–æ–¥–ø–∏—Å–∫–∞ –Ω–µ –∞–∫—Ç–∏–≤–Ω–∞";
          }
          if (profileStatusText) {
            profileStatusText.textContent = "–ù–µ –æ–ø–ª–∞—á–µ–Ω–æ";
          }
        }

      } catch (error) {
        console.error("‚ùå Error updating subscription status:", error);
      }
    }

    (async function init(){
      applyDynamicBase();

      safe(()=>{
        tg?.ready?.();
        tg?.expand?.();
        tg?.setHeaderColor?.("#000000");
        tg?.setBackgroundColor?.("#000000");
      });

      const now = new Date();
      $("profile-registered-at").textContent = new Intl.DateTimeFormat("ru-RU").format(now);

      const user = tg?.initDataUnsafe?.user;

      if(user){
        const niceName = pickNiceName(user);

        $("user-name").innerText = niceName;
        $("user-id").innerText = "ID: " + user.id;

        const fullName = [user.first_name, user.last_name].filter(Boolean).join(" ").trim();
        $("profile-name").innerText = fullName || niceName;
        $("profile-id").innerText = String(user.id);

        const ref = $("referral-link");
        if(ref) ref.innerText = `https://t.me/HollowVPN_bot?start=ref_${user.id}`;
      }else{
        $("user-name").innerText = "–¢–µ—Å—Ç–æ–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å";
        $("user-id").innerText = "ID: 000000";
        $("profile-name").innerText = "–¢–µ—Å—Ç–æ–≤—ã–π –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å";
        $("profile-id").innerText = "000000";
      }

      setRingProgress(0);
      await fetchSubscription();
      updateSubscriptionStatus();
      setInterval(updateSubscriptionStatus, 30000);
    })();
  </script>
</body>
</html>

